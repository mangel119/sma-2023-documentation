"use strict";(self.webpackChunksma_2023_01=self.webpackChunksma_2023_01||[]).push([[339],{3905:(e,a,n)=>{n.d(a,{Zo:()=>c,kt:()=>f});var r=n(7294);function t(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){t(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a){if(null==e)return{};var n,r,t=function(e,a){if(null==e)return{};var n,r,t={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],a.indexOf(n)>=0||(t[n]=e[n]);return t}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var l=r.createContext({}),u=function(e){var a=r.useContext(l),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},c=function(e){var a=u(e.components);return r.createElement(l.Provider,{value:a},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},m=r.forwardRef((function(e,a){var n=e.components,t=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),m=t,f=d["".concat(l,".").concat(m)]||d[m]||p[m]||i;return n?r.createElement(f,o(o({ref:a},c),{},{components:n})):r.createElement(f,o({ref:a},c))}));function f(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s[d]="string"==typeof e?e:t,o[1]=s;for(var u=2;u<i;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4196:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var r=n(7462),t=(n(7294),n(3905));const i={sidebar_position:4},o="Sistema de Login",s={unversionedId:"cambios/login",id:"cambios/login",title:"Sistema de Login",description:"Se implement\xf3 el sistema de Login y Autenticaci\xf3n de usuario usando el Servicio de Supabase.",source:"@site/docs/cambios/login.md",sourceDirName:"cambios",slug:"/cambios/login",permalink:"/sma-2023-documentation/docs/cambios/login",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cambios/login.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Cambios en el Back End",permalink:"/sma-2023-documentation/docs/cambios/cambiosBack"}},l={},u=[{value:"Credenciales",id:"credenciales",level:2},{value:"profesor",id:"profesor",level:3},{value:"estudiante",id:"estudiante",level:3},{value:"Crear usuarios",id:"crear-usuarios",level:2},{value:"1. Registro de usuarios en Auth",id:"1-registro-de-usuarios-en-auth",level:3},{value:"2. Creaci\xf3n de la informaci\xf3n del Usuario",id:"2-creaci\xf3n-de-la-informaci\xf3n-del-usuario",level:3},{value:"Utilizar la informaci\xf3n del usuario que inici\xf3 sesi\xf3n",id:"utilizar-la-informaci\xf3n-del-usuario-que-inici\xf3-sesi\xf3n",level:2}],c={toc:u},d="wrapper";function p(e){let{components:a,...i}=e;return(0,t.kt)(d,(0,r.Z)({},c,i,{components:a,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"sistema-de-login"},"Sistema de Login"),(0,t.kt)("p",null,"Se implement\xf3 el sistema de Login y Autenticaci\xf3n de usuario usando el Servicio de Supabase.\nEsto permite conectar a los usuarios registrados con la informaci\xf3n de la base de datos."),(0,t.kt)("p",null,"Las rutas se encuentras protegidas.\nEsto quiere decir que si un usuario intenta acceder a la plataforma sin haber inciado sesi\xf3n no se le permitir\xe1\ny lo redireccionar\xe1 a la p\xe1gina de login.\nLo mismo sucede si un usuario ",(0,t.kt)("em",{parentName:"p"},"profesor")," intenta acceder a la plataforma de estudiante lo devolver\xe1 a su plataforma de profesor.\nCon el usuario ",(0,t.kt)("em",{parentName:"p"},"estudiante")," sucede lo mismo si intenta acceder a la plataforma de profesor."),(0,t.kt)("h2",{id:"credenciales"},"Credenciales"),(0,t.kt)("p",null,"Los desarrolladores backend son los encargados de crear usuarios.\nSin embargo desde infraestructura se crearon estos usuarios de prueba para poder seguir con el desarrollo."),(0,t.kt)("h3",{id:"profesor"},"profesor"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"email")," ",(0,t.kt)("a",{parentName:"p",href:"mailto:supero@profesor.com"},"supero@profesor.com"),"\n",(0,t.kt)("strong",{parentName:"p"},"contrase\xf1a")," profesor123"),(0,t.kt)("h3",{id:"estudiante"},"estudiante"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"email")," ",(0,t.kt)("a",{parentName:"p",href:"mailto:hamilson@estudiante.com"},"hamilson@estudiante.com"),"\n",(0,t.kt)("strong",{parentName:"p"},"contrase\xf1a")," estudiante123"),(0,t.kt)("h2",{id:"crear-usuarios"},"Crear usuarios"),(0,t.kt)("p",null,"El proceso de creaci\xf3n de usuarios consta de dos partes para poder funcionar correctamente."),(0,t.kt)("h3",{id:"1-registro-de-usuarios-en-auth"},"1. Registro de usuarios en Auth"),(0,t.kt)("p",null,"En la secci\xf3n de Auth ubicada a la izquierda est\xe1 toda la informaci\xf3n de los usuarios ya registrados.\nDeben dar click en el bot\xf3n que dice ",(0,t.kt)("inlineCode",{parentName:"p"},"Add user"),".\nColocan el correo y la contrase\xf1a correspondiente a ese usuario."),(0,t.kt)("p",null,"Deben recordar o anotar la contrase\xf1a ya que Supabase almacena es un token encriptado de dicha contrase\xf1a para mayor seguridad. Dejan seleccionada la opci\xf3n de auto-confirmar.\n",(0,t.kt)("img",{alt:"Auth",src:n(6238).Z,width:"1366",height:"743"})),(0,t.kt)("h3",{id:"2-creaci\xf3n-de-la-informaci\xf3n-del-usuario"},"2. Creaci\xf3n de la informaci\xf3n del Usuario"),(0,t.kt)("p",null,"Luego de registrar el correo y la contrase\xf1a debemos agregar la informaci\xf3n correspondiente al usuario registrado."),(0,t.kt)("p",null,"Se dirigen a la secci\xf3n de ",(0,t.kt)("em",{parentName:"p"},"Table Editor"),", y luego a la tabla de ",(0,t.kt)("inlineCode",{parentName:"p"},"Participants"),"\naqu\xed es donde se guarda la informaci\xf3n de los participantes.\n",(0,t.kt)("img",{alt:"Row",src:n(4553).Z,width:"1366",height:"743"})),(0,t.kt)("p",null,"Le dan click al bot\xf3n ",(0,t.kt)("inlineCode",{parentName:"p"},"Insert row")," para agregar una nueva fila con informaci\xf3n de un usuario.\nEn la ventana que les aparece es donde ingresar\xe1n la informaci\xf3n del usuario que registraron como el nombre, rol, entre otros.\n",(0,t.kt)("img",{alt:"User",src:n(4034).Z,width:"1366",height:"743"})),(0,t.kt)("admonition",{title:"\xa1Atenci\xf3n!",type:"caution"},(0,t.kt)("p",{parentName:"admonition"},"Deben prestar mucha atenci\xf3n que el email utilizado en el primer paso debe ser igual al email utilizado en el segundo paso para poder funcionar.")),(0,t.kt)("p",null,"Con estos pasos ya pueden iniciar sesi\xf3n en la plataforma."),(0,t.kt)("h2",{id:"utilizar-la-informaci\xf3n-del-usuario-que-inici\xf3-sesi\xf3n"},"Utilizar la informaci\xf3n del usuario que inici\xf3 sesi\xf3n"),(0,t.kt)("p",null,"Se agregaron nuevos Client de supabase,\nesto permite obtener acceso a la informaci\xf3n de la base de datos\ndesde el usuario que inici\xf3 sesi\xf3n."),(0,t.kt)("p",null,"Aqu\xed pueden ver un ejemplo aplicado en el proyecto de una API que trae de la base de datos\nla informaci\xf3n de los cursos a los que pertenece el usuario que inici\xf3 sesi\xf3n.\n",(0,t.kt)("img",{alt:"ExampleAPI",src:n(5133).Z,width:"1712",height:"833"}),"\nSe importa el ",(0,t.kt)("inlineCode",{parentName:"p"},"createClient")," de ",(0,t.kt)("em",{parentName:"p"},"supabase-server")," para crear el cliente desde el servidor y no desde el navegador del usuario.\nDentro de la funci\xf3n creamos el cliente y obtenemos la informaci\xf3n de la sesi\xf3n dentro de un\nobjeto ",(0,t.kt)("inlineCode",{parentName:"p"},"{ data: { session } }"),".\nCuando hacemos la consulta a la base de datos de supabase podemos compararlo con el email\ndel usuario que inici\xf3 sesi\xf3n por medio de ",(0,t.kt)("inlineCode",{parentName:"p"},"session?.user.email"),".\nEsto nos trae la informaci\xf3n solo relacionada al usuario actual."),(0,t.kt)("p",null,"En el siguiente video pueden encontrar m\xe1s detalles de esta vinculaci\xf3n."),(0,t.kt)("p",null,(0,t.kt)("a",{parentName:"p",href:"https://youtu.be/Y2nPEWrSfic?t=1587"},"https://youtu.be/Y2nPEWrSfic?t=1587")))}p.isMDXComponent=!0},6238:(e,a,n)=>{n.d(a,{Z:()=>r});const r=n.p+"assets/images/auth-f020e7e83e91e14d4be1e5c6e399241a.png"},5133:(e,a,n)=>{n.d(a,{Z:()=>r});const r=n.p+"assets/images/example-45e55ffdba66c2fa7a0030d495f00ed9.png"},4034:(e,a,n)=>{n.d(a,{Z:()=>r});const r=n.p+"assets/images/participant-67c96c0160212d0c775da619058935d0.png"},4553:(e,a,n)=>{n.d(a,{Z:()=>r});const r=n.p+"assets/images/row-6440fd515964ee5d0a4ccff60b972e12.png"}}]);